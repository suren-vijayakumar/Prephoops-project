var prepHoopsApp=angular.module("prepHoopsApp",["ngRoute","ui.bootstrap","appControllers"]),appControllers=angular.module("appControllers",[]);prepHoopsApp.config(["$routeProvider",function(e){e.when("/login",{templateUrl:"/assets/views/routes/login.html",controller:"LoginController"}).when("/register",{templateUrl:"/assets/views/routes/register.html",controller:"RegisterController"}).when("/admin",{templateUrl:"/assets/views/routes/admin.html",controller:"AdminController"}).when("/dashboard",{templateUrl:"/assets/views/routes/dashboard.html",controller:"DashboardController"}).when("/site",{templateUrl:"/assets/views/routes/site.html",controller:"SiteController"}).otherwise({redirectTo:"/login"})}]),prepHoopsApp.factory("AuthService",["$q","$timeout","$http",function(e,t,o){function r(){return i?!0:!1}function n(){return i}function s(t,r){var n=e.defer();return o.post("/userauth/login",{username:t,password:r}).success(function(e,t){200===t&&e.status?(i=!0,n.resolve()):(i=!1,n.reject())}).error(function(e){console.log("error"),i=!1,n.reject()}),n.promise}function l(){var t=e.defer();return o.get("/userauth/logout").success(function(e){i=!1,t.resolve()}).error(function(e){i=!1,t.reject()}),t.promise}var i=!1;return{isLoggedIn:r,getUserStatus:n,login:s,logout:l,user:i}}]),prepHoopsApp.run(["$rootScope","$location","$route","AuthService",function(e,t,o,r){e.$on("$routeChangeStart",function(e,o,n){r.isLoggedIn()===!1&&t.path("/login")})}]),prepHoopsApp.factory("siteFullName",function(){var e={};return{get:function(t){return e[t]},set:function(t,o){e[t]=o}}}),prepHoopsApp.controller("DropdownCtrl",["$scope","$rootScope","$http","$log","$location","siteFullName",function(e,t,o,r,n,s){e.feeds=[],e.getFeeds=function(){o.get("/network/getFeeds").success(function(t){e.feeds=t})},e.getFeeds(),e.go=function(t){e.getFeeds(),n.path(t),e.selectedSite=this.site.siteFullName,s.set("siteFullName",this.site.siteFullName)},e.$watch("selectedSite",function(){t.$broadcast("siteChanged",e.selectedSite)}),e.status={isopen:!1},e.toggled=function(e){r.log("Dropdown is now: ",e)},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen}}]),prepHoopsApp.controller("logoutController",["$scope","$location","AuthService",function(e,t,o){e.logout=function(){o.logout().then(function(){t.path("/login")})}}]);